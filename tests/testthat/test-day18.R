test_that("day 18", {
  expect_pair <- function(x1, x2) {
    expect_equal(
      x1 |> f18_snailfish_rows() |> f18_reduce_snailfish(),
      x2 |> f18_snailfish_rows()
    )
  }

  expect_pair("[[[[[9,8],1],2],3],4]", "[[[[0,9],2],3],4]")
  expect_pair("[7,[6,[5,[4,[3,2]]]]]", "[7,[6,[5,[7,0]]]]")
  expect_pair("[[6,[5,[4,[3,2]]]],1]", "[[6,[5,[7,0]]],3]")
  expect_pair(
    "[[3,[2,[1,[7,3]]]],[6,[5,[4,[3,2]]]]]",
    "[[3,[2,[8,0]]],[9,[5,[4,[3,2]]]]]"
  )
  expect_pair(
    "[[3,[2,[8,0]]],[9,[5,[4,[3,2]]]]]",
    "[[3,[2,[8,0]]],[9,[5,[7,0]]]]"
  )


})

